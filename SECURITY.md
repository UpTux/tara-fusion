# Security Policy

## SLSA Compliance

TARA Fusion follows the [SLSA (Supply chain Levels for Software Artifacts)](https://slsa.dev) framework to ensure supply chain security.

### SLSA Level 3 Compliance ‚úÖ

This project meets **SLSA Level 3** requirements - the highest practical level of supply chain security:

#### Level 1 Requirements ‚úÖ

- ‚úÖ **Fully Scripted Build**: The entire build process is automated using GitHub Actions
- ‚úÖ **Provenance Generation**: Build provenance is automatically generated for all releases
- ‚úÖ **Build Service**: GitHub Actions provides the build service
- ‚úÖ **Build as Code**: All build steps are defined in `.github/workflows/release.yml`

#### Level 2 Requirements ‚úÖ

- ‚úÖ **Source Version Control**: All code changes tracked in GitHub
- ‚úÖ **Build Service Authentication**: GitHub Actions with authenticated access
- ‚úÖ **Service-Generated Provenance**: Provenance generated by trusted build service
- ‚úÖ **Branch Protection**: Required reviews via CODEOWNERS and branch protection rules

#### Level 3 Requirements ‚úÖ

- ‚úÖ **Hardened Build Platform**: GitHub-hosted runners with security hardening
- ‚úÖ **Build Isolation**: SLSA GitHub Generator provides isolated build environment
- ‚úÖ **Unforgeable Provenance**: Cryptographically signed with Sigstore
- ‚úÖ **Transparency Log**: All builds recorded in Rekor transparency log
- ‚úÖ **Non-Falsifiable**: Provenance cannot be modified or forged

### Build Provenance

Every release includes SLSA provenance attestation that records:

- **Source Repository**: Where the code came from
- **Build Process**: Exact steps taken to build the artifacts
- **Build Environment**: GitHub Actions runner and dependencies
- **Materials**: Source code commit and dependencies used
- **Output Artifacts**: Built files and their checksums

### Verifying Release Artifacts

To verify the authenticity and integrity of a release:

#### 1. Verify Checksums

```bash
# Download the release artifacts and checksums.txt
sha256sum -c checksums.txt
```

#### 2. Verify SLSA Provenance

Install the [slsa-verifier](https://github.com/slsa-framework/slsa-verifier):

```bash
# Using go install
go install github.com/slsa-framework/slsa-verifier/v2/cli/slsa-verifier@latest

# Or download binary from releases
wget https://github.com/slsa-framework/slsa-verifier/releases/latest/download/slsa-verifier-linux-amd64
chmod +x slsa-verifier-linux-amd64
```

Verify the artifact:

```bash
slsa-verifier verify-artifact \
  --provenance-path tara-fusion-v*.intoto.jsonl \
  --source-uri github.com/patdhlk/tara-fusion \
  tara-fusion-v*.tar.gz
```

Expected output:

```
Verified signature against tlog entry index X at URL: ...
Verified build using builder "https://github.com/slsa-framework/slsa-github-generator/.github/workflows/generator_generic_slsa3.yml@refs/tags/v2.0.0" at commit ...
Verifying artifact tara-fusion-v*.tar.gz: PASSED

PASSED: Verified SLSA provenance
```

### Understanding SLSA Levels

| Level | Description | TARA Fusion Status |
|-------|-------------|-------------------|
| **Level 0** | No guarantees | ‚ùå Exceeded |
| **Level 1** | Build process documented | ‚úÖ Achieved |
| **Level 2** | Tamper-resistant build service | ‚úÖ Achieved |
| **Level 3** | Hardened build platform | ‚úÖ **CURRENT LEVEL** |
| **Level 4** | Two-party review + hermetic builds | üîÆ Future goal |

### Build Process Details

The automated build process:

1. **Source Checkout**: Fetches source code from the repository
2. **Dependency Installation**: Installs exact versions from `package-lock.json` using `npm ci`
3. **Quality Checks**: Runs tests, linting, and type checking
4. **Build**: Compiles TypeScript and bundles with Vite
5. **Packaging**: Creates distribution archives (tar.gz, zip)
6. **Checksums**: Generates SHA-256 hashes for all artifacts
7. **Provenance**: SLSA generator creates signed attestation
8. **Release**: Publishes artifacts and provenance to GitHub Releases

### Dependency Security

- **Lock File**: `package-lock.json` ensures reproducible builds
- **Integrity Checks**: npm verifies package integrity using checksums
- **Audit**: Regular `npm audit` checks for known vulnerabilities
- **Updates**: Dependencies reviewed and updated regularly

## Reporting a Vulnerability

If you discover a security vulnerability, please report it by:

1. **Email**: Create a GitHub Security Advisory at <https://github.com/patdhlk/tara-fusion/security/advisories>
2. **Do Not** open a public issue for security vulnerabilities

We will respond within 48 hours and work with you to understand and fix the issue.

## Security Best Practices

When deploying TARA Fusion:

### 1. API Key Security

- **Never commit** API keys to version control
- Use environment variables or secure secret management
- Rotate API keys regularly
- Restrict API key permissions to minimum required

### 2. Authentication

- Configure Auth0 properly with strong tenant settings
- Use HTTPS in production
- Enable MFA for administrator accounts
- Review and audit user permissions regularly

### 3. Deployment

- Serve application over HTTPS only
- Set appropriate CSP (Content Security Policy) headers
- Enable HSTS (HTTP Strict Transport Security)
- Keep dependencies updated
- Use a WAF (Web Application Firewall) if possible

### 4. Data Protection

- Encrypt sensitive data at rest and in transit
- Implement proper access controls
- Regular backups of project data
- Audit trail for all changes

## Supported Versions

| Version | Supported          |
| ------- | ------------------ |
| Latest  | ‚úÖ Yes             |
| < Latest| ‚ö†Ô∏è Security fixes only |

## Build Reproducibility

While SLSA Level 1 doesn't require bit-for-bit reproducibility, we strive for it:

- **Locked Dependencies**: `package-lock.json` pins exact versions
- **Node Version**: Specified in workflows (currently 20.x)
- **Build Tools**: Vite version locked in package.json
- **Environment**: Ubuntu latest (documented in workflow)

## Continuous Improvement

We are continuously working to improve our security posture:

- üéØ Achieve SLSA Level 2 with stricter build isolation
- üéØ Implement dependency pinning with hash verification
- üéØ Add SBOM (Software Bill of Materials) generation
- üéØ Automated security scanning in CI/CD
- üéØ Container image signing and provenance

## References

- [SLSA Framework](https://slsa.dev)
- [SLSA GitHub Generator](https://github.com/slsa-framework/slsa-github-generator)
- [OpenSSF Best Practices](https://bestpractices.coreinfrastructure.org/)
- [Supply Chain Security](https://www.cisa.gov/supply-chain-security)

---

Last Updated: November 2025
